 Police battled to contain a wave of violence in South Africa last night as gangs of migrants armed themselves with machetes to fight off anti-foreigner attacks by locals .
Five people have died since vigilantes started looting and attacking shops owned by immigrants .
Police fired stun grenades and rubber bullets as immigrant gangs .
More than 200 immigrants had to take refuge in a police station .